local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()
local Window = Rayfield:CreateWindow({
    Name = "Moons 500K Offer",
    Icon = 0,
    LoadingTitle = "By Godlike",
    LoadingSubtitle = "MoonHub on top",
    Theme = "Serenity",

    DisableRayfieldPrompts = false,
    DisableBuildWarnings = false,

    ConfigurationSaving = {
        Enabled = true,
        FolderName = nil,
        FileName = "Big Hub"
    },

    Discord = {
        Enabled = false,
        Invite = "noinvitelink",
        RememberJoins = true
    },

    KeySystem = false,
    KeySettings = {
        Title = "Untitled",
        Subtitle = "Key System",
        Note = "No method of obtaining the key is provided",
        FileName = "Key",
        SaveKey = true,
        GrabKeyFromSite = false,
        Key = {"Hello"}
    }
})

Rayfield:Notify({
    Title = "Hello Again Carson",
    Content = "Welcome Back my G",
    Duration = 6.5,
    Image = "moon",
})

local TabMain = Window:CreateTab("Main", "circle-check-big")
local TabAutoWeight = Window:CreateTab("Auto Weight", "dumbbell")
local TabAutoRebirth = Window:CreateTab("Auto Rebirth", "dumbbell")

local Section = TabMain:CreateSection("Misc V1")

-- Add the size slider
local SliderSize = TabMain:CreateSlider({
    Name = "Size Changer",
    Range = {1, 100},
    Increment = 1,
    Suffix = "Size",
    CurrentValue = 2,
    Flag = "Size",
    Callback = function(Value)
        _G.AutoSize = Value
        while _G.AutoSize do
            game:GetService("ReplicatedStorage").rEvents.changeSpeedSizeRemote:InvokeServer("changeSize", Value)
            task.wait(0.1)
        end
    end
})

-- Add the speed slider
local SliderSpeed = TabMain:CreateSlider({
    Name = "Speed Changer",
    Range = {14, 100},
    Increment = 1,
    Suffix = "speed",
    CurrentValue = 100,
    Flag = "Speed",
    Callback = function(Value)
        _G.AutoSpeed = Value
        while _G.AutoSpeed do
            local player = game.Players.LocalPlayer
            if player.Character and player.Character:FindFirstChild("Humanoid") then
                player.Character.Humanoid.WalkSpeed = _G.AutoSpeed
            end
            task.wait(0.1)
        end
    end,
})

-- Button to give gamepass
local Button = TabMain:CreateButton({
    Name = "FREE AUTO LIFT GAMEPASS!!!",
    Callback = function()
        local gamepassFolder = game:GetService("ReplicatedStorage").gamepassIds
        local player = game:GetService("Players").LocalPlayer
        for _, gamepass in pairs(gamepassFolder:GetChildren()) do
            local value = Instance.new("IntValue")
            value.Name = gamepass.Name
            value.Value = gamepass.Value
            value.Parent = player.ownedGamepasses
        end
    end,
})

-- Create toggles for Auto Weight, Pushups, Handstands, and Situps
local function createAutoActionToggle(tab, name)
    return tab:CreateToggle({
        Name = "Auto " .. name,
        CurrentValue = false,
        Flag = "Auto" .. name,
        Callback = function(Value)
            _G["Auto" .. name] = Value
            local tool = game.Players.LocalPlayer.Backpack:FindFirstChild(name)
            if Value and tool then
                game.Players.LocalPlayer.Character.Humanoid:EquipTool(tool)
                while _G["Auto" .. name] do
                    game:GetService("Players").LocalPlayer.muscleEvent:FireServer("rep")
                    task.wait(0.001)
                end
            else
                local character = game.Players.LocalPlayer.Character
                if character:FindFirstChild(name) then
                    character[name].Parent = game.Players.LocalPlayer.Backpack
                end
            end
        end
    })
end

createAutoActionToggle(TabAutoWeight, "Weight")
createAutoActionToggle(TabAutoWeight, "Pushups")
createAutoActionToggle(TabAutoWeight, "Handstands")
createAutoActionToggle(TabAutoWeight, "Situps")

-- Create a section for jungle machines
local Section = TabAutoWeight:CreateSection("Auto Jungle Machines")

local function createJungleMachineToggle(tab, name, position)
    return tab:CreateToggle({
        Name = "Jungle Gym " .. name,
        CurrentValue = false,
        Flag = "Jungle" .. name,
        Callback = function(Value)
            task.spawn(function()
                while Value do
                    local player = game.Players.LocalPlayer
                    player.Character:SetPrimaryPartCFrame(CFrame.new(position))
                    game:GetService("ReplicatedStorage").rEvents.machineInteractRemote:InvokeServer("useMachine", workspace.machinesFolder[name].interactSeat)
                    task.wait(0.1)
                end
            end)
        end
    })
end

createJungleMachineToggle(TabAutoWeight, "Bench", Vector3.new(-8629.88086, 64.8842468, 1855.03467))
createJungleMachineToggle(TabAutoWeight, "Squat", Vector3.new(-8374.25586, 34.5933418, 2932.44995))
createJungleMachineToggle(TabAutoWeight, "Lift", Vector3.new(-8678.05566, 14.5030098, 2089.25977))

local Section = TabAutoWeight:CreateSection("Will add more stuff later")

local infiniteRebirthLoop
local targetRebirthValue = 1

local ToggleAutoRebirth = TabAutoRebirth:CreateToggle({
   Name = "Auto Rebirth infinite",
   CurrentValue = false,
   Flag = "Autorebirthinf",
   Callback = function(Value)
      if Value then
            infiniteRebirthLoop = task.spawn(function()
                while wait(0.1) do
                    game:GetService("ReplicatedStorage").rEvents.rebirthRemote:InvokeServer("rebirthRequest")
                end
            end)
        else
            if infiniteRebirthLoop then
                task.cancel(infiniteRebirthLoop)
                infiniteRebirthLoop = nil
            end
        end
    end
})

local Input = TabAutoRebirth:CreateInput({
   Name = "Target Rebirth input",
   CurrentValue = "1",
   PlaceholderText = "Put in a number",
   RemoveTextAfterFocusLost = false,
   Flag = "TargetRebirth",
   Callback = function(Text)
     targetRebirthValue = tonumber(Text) or 1  -- Fixed the input reference
     -- Call updateStats if it exists as a function
     if typeof(updateStats) == "function" then
         updateStats()
     end
    end
})

local ToggleTargetRebirth = TabAutoRebirth:CreateToggle({
   Name = "Auto Rebirth Target",
   CurrentValue = false,
   Flag = "ART",
   Callback = function(Value)
      if Value then
         targetRebirthLoop = task.spawn(function()
            while wait(0.1) do
               if game.Players.LocalPlayer.leaderstats.Rebirths.Value >= targetRebirthValue then
                  ToggleTargetRebirth:SetValue(false)  -- Reference to the toggle directly
                  break
               end
               game:GetService("ReplicatedStorage").rEvents.rebirthRemote:InvokeServer("rebirthRequest")
            end
         end)
      else
         if targetRebirthLoop then
            task.cancel(targetRebirthLoop)
            targetRebirthLoop = nil
         end
      end
   end
})
